<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
  <title>The Last Light ‚Äî A Field Guide to Our Digital Crossroads</title>
  <meta name="description"
    content="An open-source book exploring the collision between human consciousness and artificial intelligence. 35 chapters on philosophy, neuroscience, and the economics of obsolescence." />

  <!-- Open Graph / Social Sharing -->
  <meta property="og:type" content="book" />
  <meta property="og:title" content="The Last Light ‚Äî A Field Guide to Our Digital Crossroads" />
  <meta property="og:description"
    content="What happens when the machines we built to think for us start thinking better than us? An open-source intellectual project." />
  <meta property="og:url" content="https://portia-labs.github.io/the-last-light/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="The Last Light ‚Äî A Field Guide to Our Digital Crossroads" />
  <meta name="twitter:description"
    content="An open-source book on AI, consciousness, and the future of human agency." />

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/dark.css" />
  <link rel="stylesheet" href="portia-theme.css" />
  <link rel="icon" href="favicon.png" type="image/png" />
</head>

<body>
  <div id="app">Loading‚Ä¶</div>

  <noscript>
    <h1>The Last Light: A Field Guide to Our Digital Crossroads</h1>
    <p>This book requires JavaScript to render. Please enable JavaScript or visit the
      <a href="https://github.com/portia-labs/the-last-light">GitHub repository</a>
      to read the Markdown source directly.
    </p>
  </noscript>

  <script>
    window.$docsify = {
      name: 'The Last Light',
      repo: 'https://github.com/portia-labs/the-last-light',
      loadSidebar: true,
      loadNavbar: false,
      auto2top: true,
      coverpage: ['/', '/nl/'],
      onlyCover: true,
      executeScript: true,
      maxLevel: 4,
      subMaxLevel: 3,
      nameLink: {
        '/nl/': '#/nl/',
        '/': '#/',
      },
      // Prevent Docsify from looking for _sidebar.md in every subdirectory
      alias: {
        '/nl/': '/nl/README.md',
        '/nl/.*/_sidebar.md': '/nl/_sidebar.md',
        '/(?!nl\/).*/_sidebar.md': '/_sidebar.md',
      },
      // Fallback sidebar if _sidebar.md is not found
      notFoundPage: true,
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: {
          '/nl/': 'Zoeken...',
          '/': 'Search chapters, concepts, names‚Ä¶',
        },
        noData: {
          '/nl/': 'Geen resultaten gevonden.',
          '/': 'No matching section found.',
        },
        depth: 6,
        hideOtherSidebarContent: true,
        namespace: 'the-last-light-v3'
      },
      pagination: {
        previousText: '‚Üê Previous',
        nextText: 'Next ‚Üí',
        crossChapter: true,
        crossChapterText: true,
      },
      plugins: [
        function (hook, vm) {
          hook.ready(function () {
            // Function to change language
            window.changeLanguage = function (lang) {
              if (lang === 'nl') {
                window.location.hash = '/nl/';
              } else {
                window.location.hash = '/';
              }
              window.location.reload();
            };
          });

          hook.doneEach(function () {
            // Language Switcher injection
            var nav = document.querySelector('.app-nav');
            if (!nav) {
              nav = document.createElement('nav');
              nav.className = 'app-nav';
              document.querySelector('.app-name').insertAdjacentElement('afterend', nav);
            }

            // Allow user to toggle
            var isDutch = window.location.hash.startsWith('#/nl');
            var langText = isDutch ? 'English' : 'Nederlands';
            var targetLang = isDutch ? 'en' : 'nl';

            // Create a simple button/link in the upper right or top of sidebar
            var langSwitch = document.createElement('a');
            langSwitch.href = 'javascript:void(0)';
            langSwitch.onclick = function () { window.changeLanguage(targetLang); };
            langSwitch.innerText = isDutch ? 'üá¨üáß EN' : 'üá≥üá± NL';
            langSwitch.style.cssText = 'position:fixed; bottom:20px; right:20px; font-weight:bold; cursor:pointer; color:var(--theme-color, #ea6f5a); z-index:999; text-decoration:none; border:1px solid currentColor; padding:4px 8px; border-radius:4px; background:var(--background, #fff);';

            document.body.appendChild(langSwitch);

            // Open external links in new tab
            document.querySelectorAll('.content a').forEach(function (a) {
              var href = a.getAttribute('href') || '';
              if (href.startsWith('http')) {
                a.setAttribute('target', '_blank');
                a.setAttribute('rel', 'noopener noreferrer');
              }
            });
          });

          // Reading progress bar
          hook.mounted(function () {
            var bar = document.createElement('div');
            bar.id = 'reading-progress';
            bar.style.cssText = 'position:fixed;top:0;left:0;height:2px;background:var(--accent,#7c73ff);z-index:9999;transition:width .15s ease;width:0;opacity:0.7;';
            document.body.appendChild(bar);
          });

          hook.doneEach(function () {
            var bar = document.getElementById('reading-progress');
            if (!bar) return;

            function updateProgress() {
              var article = document.querySelector('.markdown-section');
              if (!article) return;
              var rect = article.getBoundingClientRect();
              var total = article.scrollHeight - window.innerHeight;
              var scrolled = -rect.top;
              var pct = Math.min(Math.max(scrolled / total * 100, 0), 100);
              bar.style.width = pct + '%';
            }

            window.removeEventListener('scroll', updateProgress);
            window.addEventListener('scroll', updateProgress, { passive: true });
            updateProgress();
          });
        },
      ],
    };
  </script>

  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/zoom-image.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
</body>

</html>